#### 目录介绍
- 01.线程的简单介绍
- 02.多线程有何意义
- 03.线程和进程的关系
- 05.Java程序是多线程
- 06.Java中的主线程






### 01.线程的简单介绍
- 线程（英语：thread）是操作系统能够进行运算调度的最小单位。
    - 它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。
    - 在一个进程内部又可以执行多个任务，而这每一个任务我们就可以看成是一个线程。
    - 一个进程可以有很多线程，每条线程并行执行不同的任务。线程是程序使用CPU的基本单位。注意：线程是依赖于进程存在的。
- 同进程不同线程资源共享
    - 同一进程中的多条线程将共享该进程中的全部系统资源，如虚拟地址空间，文件描述符和信号处理等等。
    - 但同一进程中的多个线程有各自的调用栈（call stack），自己的寄存器环境（register context），自己的线程本地存储（thread-local storage）。



### 02.多线程有何意义
- 为何要多线程
    - 在多核或多CPU，或支持Hyper-threading的CPU上使用多线程程序设计的好处是显而易见，即提高了程序的执行吞吐率。
    - 在单CPU单核的计算机上，使用多线程技术，也可以把进程中负责I/O处理、人机交互而常被阻塞的部分与密集计算的部分分开来执行，编写专门的workhorse线程执行密集计算，从而提高了程序的执行效率。
- 多线程的作用不是提高执行速度，而是为了提高应用程序的使用率。
    - 那么怎么理解这个问题呢?我们程序在运行的使用,都是在抢CPU的时间片(执行权),如果是多线程的程序,那么在抢到CPU的执行权的概率应该比较单线程程序抢到的概率要大。
    - 那么也就是说,CPU在多线程程序中执行的时间要比单线程多,所以就提高了程序的使用率.但是即使是多线程程序,那么他们中的哪个线程能抢占到CPU的资源呢，这个是不确定的,所以多线程具有随机性.
- 并行和并发
    - 前者是逻辑上同时发生，指在某一个时间内同时运行多个程序。
    - 后者是物理上同时发生，指在某一个时间点同时运行多个程序。


### 03.线程和进程的关系
- 进程与线程概念区别
    - **进程：** 进程是进程实体的运行过程，是系统进行资源分配和调度的一个独立单位（具有动态、并发、独立、异步的特性，以及就绪、执行、阻塞3种状态）；引入进程是为了使多个程序可以并发的执行，以提高系统的资源利用率和吞吐量。
    - **线程：** 是比进程更小的可独立运行的基本单位，可以看做是轻量级的进程（具有轻型实体，独立调度分派单位，可并发执行，共享进程资源等属性）；引入目的是为了减少程序在并发执行过程中的开销，使OS的并发效率更高。
- 进程与线程调度区别
    - 调度方面：在引入线程的OS中，线程是独立的调度和分派单位，而进程作为资源的拥有单位(相当于把未引入线程的传统OS中的进程的两个属性分开了)。由于线程不拥有资源，因此可以显著的提高并发度以及减少切换开销。
- 进程与线程并发行区别
    - 并发性：引入了线程的OS中，进程间可以并发，而且一个进程内部的多个线程之间也是可以并发的，这就使OS具有更好的并发性，有效的提高了系统资源利用率和吞吐量。[博客](https://github.com/yangchong211/YCBlogs)
- 进程与线程拥有资源对比
    - 进程，拥有资源：无论OS是否支持线程，进程都是基本的资源拥有单位，线程只拥有很少的基本的资源，但是线程可以访问所隶属的进程的资源（进程的代码段，数据段和所拥有的系统资源如fd）
    - 线程，线程与资源分配无关，它属于某一个进程，并与进程内的其他线程一起共享进程的资源。
- 进程与线程系统开销对比
    - 系统开销：创建或者撤销进程的时候，系统要为之创建或回收PCB，系统资源等，切换时也需要保存和恢复CPU环境。
    - 而线程的切换只需要保存和恢复少量的寄存器，不涉及存储器管理方面的工作，所以开销较小。此外，统一进程中的多个线程由于共享地址空间，所以通信同步等都比较方便。



### 05.Java程序是多线程
- 一个java程序从main()方法开始执行，然后按照既定的代码逻辑执行，看似没有其他线程参与，但实际上java程序天生就是一个多线程程序，包含了：
    - （1）分发处理发送给给JVM信号的线程；
    - （2）调用对象的finalize方法的线程；
    - （3）清除Reference的线程；
    - （4）main线程，用户程序的入口。
- Java程序运行原理
    - Java命令会启动java虚拟机，启动JVM，等于启动了一个应用程序，也就是启动了一个进程。
    - 该进程会自动启动一个 “主线程” ，然后主线程去调用某个类的 main 方法。所以 main方法运行在主线程中。
- JVM的启动是多线程的吗
    - JVM启动至少启动了垃圾回收线程和主线程，所以是多线程的。



### 06.Java中的主线程
- 当Java程序启动时，会立即开始运行一个线程，因为它是程序开始时执行的线程，所以这个线程通常称为程序的主线程。其他子线程都是从主线程产生的。
    - 可以通过调用 currentThread() 方法获得对主线程的一个引用，该方法是Thread类的共有静态成员，返回对调用它的线程的引用，方法原型如下所示：
    ```
    public static native Thread currentThread();
    ```
- 例如，运行以下Demo
    ```
    public class Demo {
    
    	public static void main(String[] args) {
    		Thread t=Thread.currentThread();
    		System.out.println("Thread:"+t);
    		System.out.println("Thread Name:"+t.getName());
    		
    		t.setName("MyName");
    		System.out.println("Thread:"+t);
    		System.out.println("Thread Name:"+t.getName());
    	}
    	
    }
    ```
    - 输出值为：
    ```
    Thread:Thread[main,5,main]
    Thread Name:main
    Thread:Thread[MyName,5,main]
    Thread Name:MyName
    ```
    - 当将线程 t 直接作为println() 方法的参数输出时，将依次显示线程的名称、优先级以及线程所属线程组的名称。默认情况下，主线程的名称是 main，优先级是5，主线程所属线程组的名称也是 main。线程组是将一类线程作为整体来控制状态的数据结构。可以通过 Thread.setName(String) 方法来设置线程名称。



