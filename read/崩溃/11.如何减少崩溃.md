#### 目录总结




### 01.问题抛出
- android运行的时候难免会有一些空指针(NullPointerException)或者下标越界(IndexOutOfBoundsException),用户使用的过程操作某一个按钮的时候,就发生了崩溃.这时候可能还没有到他感兴趣的部分,程序就Crash掉了,因此导致了用户流失
- 在集成一些第三方库的时候,我们不能修改里面的实现(例如 Gson,FastJson,OkHttp,OkSocket,Glide)等,那么如果他们里面抛出异常如何解决,Glide加载图片之后填充图片时,如果Activity销毁就会造成崩溃,那么我们如何解决?



### 03.解决思路
- 子线程发生崩溃,保证主线程Looper继续Loop
- 当绘制,测量,布局出现问题导致编舞者Crash时,应该及时处理(关闭当前异常的界面)
- 生命周期方法发生了异常,在ActivityThread里面hook其中的Instrumentation.进行代理.
- 对ActivityThread中的mH 变量添加Callback,对于不能再Instrumentation中处理的异常进行再次Catch.最大限度保证不崩溃.




### 02.异常crash后操作
- 诸葛书kindle项目，可能有几点导致项目无法使用：
    - 异常崩溃，导致app退出。因为kindle是无桌面的，导致找不到重启app入口。
    - 某些页面或者弹窗无返回键，因为一些请求失败导致无法下一步，获取条件不足而无法下一步。
    - 在隐藏导航栏页面，没有网络，导致无法链接Wi-Fi。如果该页面有网络请求，请求
- 异常崩溃后思考的一些问题
    - 1.是否需要恢复activity栈，以及所在崩溃页面数据
    - 2.crash信息保存和异常捕获，是否和百度bug统计sdk兼容
    - 3.是否要回到栈顶部的那个activity
    - 4.应用重启提示弹窗是否可以自定义，或者直接去掉
    - 5.异常崩溃如何友好退出
- 自动恢复Activity Stack和数据















