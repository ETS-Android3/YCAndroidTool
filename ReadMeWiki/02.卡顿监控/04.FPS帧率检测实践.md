#### 目录总结
- 01.问题思考的介绍
- 02.FPS简单的介绍
- 03.Choreographer




### 01.问题思考的介绍
- 由于Fps，内存，Cpu等都是需要频繁采样的，比如Fps，一秒钟刷新60帧，如果全量数据上报，那么后端大佬可能就把我给打死了。



### 02.FPS简单的介绍
#### 2.1 什么是Fps
- 流畅度，是页面在滑动、渲染等过程中的体验。是一个非常重要的指标。
- Android系统要求每一帧都要在 16ms 内绘制完成，平滑的完成一帧意味着任何特殊的帧需要执行所有的渲染代码（包括 framework 发送给 GPU 和 CPU 绘制到缓冲区的命令）都要在 16ms 内完成，保持流畅的体验。
- 如果没有在期间完成渲染秒就会发生掉帧。掉帧是用户体验中一个非常核心的问题。丢弃了当前帧，并且之后不能够延续之前的帧率，这种不连续的间隔会容易会引起用户的注意，也就是我们常说的卡顿、不流畅。


#### 2.2 1秒60帧会卡吗
- 那么是不是1s只要绘制了60帧是不是就是流畅的呢？也不一定，如果发生抖动的情况，那么肯定会有其中几帧是有问题的。其中肯定会有最大绘制帧，和最小绘制帧的情况，所以平均值，最大值最小值都是我们需要知道的。
  


### 03.Choreographer
- 其中关于Choreographer的介绍相关的可以参考这篇文章 https://juejin.im/post/6890407553457963022
- 一般常规的Fps采集可以通过Choreographer既UI线程绘制的编舞者，Choreographer是一个ThreadLocal的单例，接收vsync信号进行界面的渲染，我们只要对其添加一个CallBack，就可以巧妙的计算出这一帧的绘制时长。
- Matrix对于核心Choreographer是对CallbackQueue的hook，通过hook addCallbackLocked分别在不同类型的回调队列的头部添加自定义的FrameCallback。
  



### 参考
-  Fps,Memory,Cpu如何采集？
    - https://mp.weixin.qq.com/s/O2diQxhj4Kg9O4yV8MK7Hg
- 如何监测应用的 FPS ？
    - https://mp.weixin.qq.com/s/vJAonOhW79d9VXzvQlm1Gg
- https://www.wanandroid.com/blog/show/2583
    - 项目